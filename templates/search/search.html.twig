{% extends 'base.html.twig' %}
{% block stylesheets %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
<style>
.dlpro-pagination{
	display: flex;
    justify-content: center;
}
.jQpQPf {
    position: relative;
}
.gXarcg {
    bottom: 6px;
    right: 1px;
    background-color: rgb(255, 255, 255);
    position: absolute !important;
    height: 24px !important;
    width: auto !important;
    border-color: rgb(187, 187, 187) !important;
    border-width: 0px 0px 0px 1px !important;
    border-radius: 0px !important;
}
.iApOWg {
    width: 100%;
    display: flex;
    -webkit-box-align: center;
    align-items: center;
    position: relative;
    outline: none;
    padding: 0px 8px 0px 12px;
    color: rgb(68, 68, 68);
    background: rgb(255, 255, 255);
    border: 1px solid rgb(187, 187, 187);
    border-radius: 4px;
    height: 36px;
    font-size: 16px;
    line-height: 24px;
}
.kqWqou {
    display: block;
    -webkit-box-flex: 1;
    flex-grow: 1;
    flex-basis: 25%;
    border: none;
    font-size: 16px;
    line-height: 24px;
    height: 24px;
    margin: 0px 4px 4px 0px;
    min-width: 130px;
    color: rgb(68, 68, 68);
    outline: none;
    appearance: none;
    background-color: transparent;
}
.kspQVs {
    -webkit-box-flex: 1;
    flex-grow: 1;
    display: flex;
    white-space: nowrap;
    overflow: hidden;
    -webkit-box-align: center;
    align-items: center;
    user-select: none;
    margin-right: 8px;
}
.ixGTSc {
    width: 24px;
    height: 24px;
}
.iApOWg > select {
    opacity: 0;
    padding: 0px;
    border: none;
    position: absolute;
    top: 0px;
    left: 0px;
    right: 0px;
    bottom: 0px;
    width: 100%;
    height: 100%;
    cursor: pointer;
    font-size: 16px;
}
.iApOWg > select > option {
    color: rgb(68, 68, 68);
}
.iApOWg {
    width: 100%;
    display: flex;
    -webkit-box-align: center;
    align-items: center;
    position: relative;
    outline: none;
    padding: 0px 8px 0px 12px;
    color: rgb(68, 68, 68);
    background: rgb(255, 255, 255);
    border: 1px solid rgb(187, 187, 187);
    border-radius: 4px;
    height: 36px;
    font-size: 16px;
    line-height: 24px;
}
.gXarcg {
    bottom: 6px;
    right: 1px;
    background-color: rgb(255, 255, 255);
    position: absolute !important;
    height: 24px !important;
    width: auto !important;
    border-color: rgb(187, 187, 187) !important;
    border-width: 0px 0px 0px 1px !important;
    border-radius: 0px !important;
}
</style>
{% endblock %}
{% block body %}
	<section class="section section-search">
		<div class="container-fluid">
			<div class="banner-wrapper">
				<div class="banner-header text-center">
					<h1>Search Doctor, Make an Appointment</h1>
					<p>Discover the best doctors, clinic &amp; hospital the city nearest to you.</p>
				</div>
				<!-- Search -->
				<div class="search-box">
					<form method="POST" action="{{ path('app_search') }}">
						<div class="form-group search-info">
							<input type="text" id="search-doctor-field" name="search-doctor-field-q" class="form-control" id="q" placeholder="Search Doctors, Clinics, Hospitals, Diseases Etc" value="{{q}}">
							<div class="Typeahead-menu"></div>
							<span class="form-text">Ex : Dental or Sugar Check up etc</span>
						</div>
						<button type="submit" class="btn btn-primary search-btn"><i class="fas fa-search"></i> <span>Search</span></button>
					</form>
				</div>
				<!-- /Search -->
			</div>
		</div>
	</section>
	<!-- Breadcrumb -->
	<div class="breadcrumb-bar">
		<div class="container-fluid">
			<div class="row align-items-center">
				<div class="col-md-8 col-12">
					<nav aria-label="breadcrumb" class="page-breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a href="{{ path('app_index') }}">Home</a></li>
							<li class="breadcrumb-item active" aria-current="page">Search</li>
						</ol>
					</nav>
					<h2 class="breadcrumb-title">{{ pagination.getTotalItemCount() }} matches</h2>
				</div>
				<div class="col-md-4 col-12 d-md-block d-none">
					<div class="sort-by">
						{# sorting of properties based on query components #}
						<span class="sort-title">Sort by</span>
						<span class="sortby-fliter">
							<select name="sort" id="dlproSort" class="select">
								<option>Select</option>
								<option class="sortable" data-href="/?dsort=true" title="Shortest Distance" value="Shortest Distance">Shortest Distance</option>
								<!--<option class="sortable" data-href="/?psort=true" title="Shortest Waiting" value="Shortest Waiting">Shortest Waiting</option>-->
								<option class="sortable" data-href="/?psort=asc" title="Lowest Price" value="Lowest Price">Lowest Price</option>
								<option class="sortable" data-href="/?psort=desc" title="Highest Price" value="Highest Price">Highest Price</option>
							</select>
						</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- /Breadcrumb -->
	<!-- Page Content -->
	<div class="content">
		<div class="container-fluid">
			<div class="row">
				<div class="col-md-12 col-lg-4 col-xl-3 theiaStickySidebar">
					<br>
						<center><h1><p style="color:rgb(152,86,176)">I Select</p></h1></center>
					<br>
					<!-- Search Filter -->
					<div class="card search-filter">
						<div class="card-body">
							<form id="filterForm" method="post" enctype="application/x-www-form-urlencoded">
								<div class="filter-widget">
									<h4>Healthcare Specialty</h4>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" {% if "General Practitioner" in spec %}checked{% endif %} value="General Practitioner">
											<span class="checkmark"></span> General Practitioner
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" {% if "Urologist" in spec %}checked{% endif %} value="Urologist" >
											<span class="checkmark"></span> Urologist
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" {% if "Neurologist" in spec %}checked{% endif %} value="Neurologist">
											<span class="checkmark"></span> Neurologist
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" {% if "Dentist" in spec %}checked{% endif %} value="Dentist">
											<span class="checkmark"></span> Dentist
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" {% if "Dental Hygienist" in spec %}checked{% endif %} value="Dental Hygienist">
											<span class="checkmark"></span> Dental Hygienist
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" value="Orthopedist" {% if "Orthopedist" in spec %}checked{% endif %} >
											<span class="checkmark"></span> Orthopedist
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" value="Cardiologist" {% if "Cardiologist" in spec %}checked{% endif %}>
											<span class="checkmark"></span> Cardiologist
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" value="Psychologist" {% if "Psychologist" in spec %}checked{% endif %}>
											<span class="checkmark"></span> Psychologist
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" value="Nutritionist-Dietician" {% if "Nutritionist-Dietician" in spec %}checked{% endif %}>
											<span class="checkmark"></span> Nutritionist-Dietician
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" value="Alternative/Natural Medicine" {% if "Alternative/Natural Medicine" in spec %}checked{% endif %}>
											<span class="checkmark"></span> Alternative/Natural Medicine
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" value="Pediatrician" {% if "Pediatrician" in spec %}checked{% endif %}>
											<span class="checkmark"></span> Pediatrician
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" value="Dermatologist / Aesthetics" {% if "Dermatologist / Aesthetics" in spec %}checked{% endif %}>
											<span class="checkmark"></span> Dermatologist / Aesthetics
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" value="Physiotherapist" {% if "Physiotherapist" in spec %}checked{% endif %}>
											<span class="checkmark"></span> Physiotherapist
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" value="Gynecologist" {% if "Gynecologist" in spec %}checked{% endif %}>
											<span class="checkmark"></span> Gynecologist
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" value="Ophtalmologist" {% if "Ophtalmologist" in spec %}checked{% endif %}>
											<span class="checkmark"></span> Ophtalmologist
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="spec[]" type="checkbox" value="Other" {% if "Other" in spec %}checked{% endif %}>
											<span class="checkmark"></span> Other
										</label>
									</div>
								</div>
								<div class="filter-widget">
									<h4>Where? (Locality, part of town, postcode, canton, region)</h4> 
									<div size="1" class="sc-3lqdzs-0 cNGARV">
										<div class="dl1e6-0 cmCNPn">
											<div class="bkivry-0 jQpQPf">
												<div class="bkivry-0 j3cl20-0 vxeagd-0 egmZCc">
													<input type="text" id="form-field-1" value="" autocomplete="off" class="sc-1od3ffh-0 kqWqou">
												</div>
												<div class="bkivry-0 j3cl20-0 znpd2u-0 iApOWg sc-11ow7ya-0 gXarcg">
													<div class="sc-1hnf4jn-0 kspQVs">+ 2 km</div>
													<svg viewBox="0 0 24 24" sizes="" class="sc-1exlta7-0 ixGTSc"><path d="M17.71 9.29c-.39-.39-1.02-.39-1.41-.01l-.01.01-4.29 4.3-4.29-4.3c-.39-.39-1.03-.39-1.42 0s-.39 1.03 0 1.42l5 5c.39.39 1.02.39 1.41.01l.01-.01 5-5c.39-.39.39-1.02 0-1.42z"></path></svg>
													<select name="r" aria-label="Où?" class="bkivry-0 eaLMPF"></option><option value="2">+ 2 km</option><option value="5">+ 5 km</option><option value="10">+ 10 km</option><option value="15">+ 15 km</option><option value="20">+ 20 km</option><option value="30">+ 30 km</option><option value="40">+ 40 km</option></select>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="filter-widget">
									<h4>Language</h4>
									<div>
										<label class="custom_check">
											<input name="lang[]" type="checkbox" value="German" {% if "German" in language_other %}checked{% endif %}>
											<span class="checkmark"></span> German
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="lang[]" type="checkbox" value="French" {% if "French" in language_other %}checked{% endif %}>
											<span class="checkmark"></span> French
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="lang[]" type="checkbox" value="Italian" {% if "Italian" in language_other %}checked{% endif %}>
											<span class="checkmark"></span> Italian
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="lang[]" type="checkbox" value="English" {% if "English" in language_other %}checked{% endif %}>
											<span class="checkmark"></span> English
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="lang[]" type="checkbox" value="Spanish" {% if "Spanish" in language_other %}checked{% endif %}>
											<span class="checkmark"></span> Spanish
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="lang[]" type="checkbox" value="Russian" {% if "Russian" in language_other %}checked{% endif %}>
											<span class="checkmark"></span> Russian
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="lang[]" type="checkbox" value="Arabic" {% if "Arabic" in language_other %}checked{% endif %}>
											<span class="checkmark"></span> Arabic
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="lang[]" type="checkbox" id="spoken_languages_other" value="Other" {% if "Other" in language_other %}checked{% endif %}>
											<span class="checkmark"></span> Other
										</label>
									</div>
									<div>
										{% if options_other %}
										<select id="lang_other" name="lang_other[]" class="form-control" multiple="multiple" placeholder="Choose a Language...">
											{% for other in options_other %}
												{% if other != 'Choose a Language...' and other != '' %}
												<option value="{{ other }}" {% if other in lang_oth %}selected{% endif %}>{{ other }}</option>
												{% endif %}
											{% endfor %}
										</select>
										{% endif %}
									</div>
								</div>
								<div class="filter-widget">
									<h4>Gender</h4>
									<div>
										<label class="custom_check">
											<input name="gen[]" type="checkbox" value="Male" {% if "Male" in gender %}checked{% endif %} >
											<span class="checkmark"></span> Male Doctor
										</label>
									</div>
									<div>
										<label class="custom_check">
											<input name="gen[]" type="checkbox" value="Female" {% if "Female" in gender %}checked{% endif %} >
											<span class="checkmark"></span> Female Doctor
										</label>
									</div>
								</div>
								<div class="btn-search">
									<button id="filterFormSubmit" type="submit" class="btn btn-primary search-btn"><i class="fas fa-search"></i> <span>FIND DOCTORS NOW</span></button>
								</div>
							</form>
						</div>
					</div>
					<!-- /Search Filter -->
				</div>
				<div class="col-md-12 col-lg-8 col-xl-9">
					<br>
						<center><h1><p style="color:rgb(152,86,176)">I Book my Doctor</p></h1></center>
					<br>
					{% for doctor in pagination %}
					{% if doctor is iterable %}
					{% set doctor = doctor[0] %}
					{% endif %}
						<!-- Doctor Widget -->
						<div class="card">
							<div class="card-body">
								<div class="doctor-widget">
									<div class="doc-info-left">
										<div class="doctor-img">
											<a href="{{path('app_doctor_profile', {slug: doctor.getUrlProfile()})}}">
												<img src="{% if doctor.getPictureProfile() %}{{doctor.getPictureProfile()}}{% else %}/assets/img/doctor-default.jpg{% endif %}" class="img-fluid" alt="User Image">
											</a>
										</div>
										<div class="doc-info-cont">    
                                            
                                            <div class="conveythis-no-translate">
                                            <h4 class="doc-name"><a href="{{path('app_doctor_profile', {slug: doctor.getUrlProfile()})}}">{{doctor.getTitle()}} {{doctor.getFirstName()}} {{doctor.getLastName()}}</a></h4>
                                            </div>
                                            
											<p class="doc-display-languages">
												{% for lang in doctor.getDisplayLanguage() %}
													{{ lang|trans }}{% if not loop.last %} | {% endif %}
												{% endfor %}
											</p>
								{% if doctor.getSpeciality() == 'General Practitioner' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-06.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Urologist' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-01.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Neurologist' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-10.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Dentist' or doctor.getSpeciality() ==  'Dental Hygienist' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-05.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Orthopedist' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-03.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Cardiologist' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-04.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Psychologist' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-02.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Nutritionist-Dietician' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-08.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Alternative/Natural Medicine' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-12.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Pediatrician' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-13.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Dermatologist / Aesthetics' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-11.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Gynecologist' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-14.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Physiotherapist' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-07.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% elseif doctor.getSpeciality() == 'Ophtalmologist' %}
									<h5 class="doc-department">
										<img src="/assets/img/specialities/specialities-09.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
									</h5>
								{% else %}
										<h5 class="doc-department">
											<img src="/assets/img/specialities/specialities-06.png" class="img-fluid" alt="Speciality">{{doctor.getSpeciality()}}
										</h5>
								{% endif %}
											<div class="clinic-details">
												{% if doctor.getCity() or doctor.getState() or doctor.getCountry() %}
                                                
                                                <div class="conveythis-no-translate">
												<p class="doc-location"><i class="fas fa-map-marker-alt"></i>  {{doctor.getFormattedAddress2()|raw}}</p>
                                                </div>
                                                
												{% endif %}
												{% if doctor.getClinics() %}
												<ul class="clinic-gallery">
													{% for clinic in doctor.getClinics()%}
														{% set imgs = clinic.getImagesArray() %}
														{% for img in imgs %}
														<li>
															<a href="" data-fancybox="gallery">
																<img src="/uploads/doctors/clinics/{{img}}" alt="Feature">
															</a>
														</li>
														{% endfor %}
													{% endfor %}
												</ul>
												{% endif %}
											</div>
                                        </div>
                                    </div>
										<div class="doc-info-right">
											<div class="clini-infos">
												<ul>
													{% if doctor.getPriceCustomValue() %}
													<li><i class="far fa-money-bill-alt"></i> CHF {{doctor.getPriceCustomValue()}} <i class="fas fa-info-circle" data-toggle="tooltip" title="For the 1st Visit"></i> </li>
													{% endif %}
												</ul>
											</div>
										</div>
                                    </div>
                                    <br>
                
							<!-- Schedule Widget -->
							<div class="card booking-schedule schedule-widget">
								{% set times = doctor.getTimings() %}
								{{times|formathomeCalendar(doctor)|raw}}
							</div>
							<!-- /Schedule Widget -->
                                    
                            </div>
						</div>
						<!-- /Doctor Widget -->
                    {% endfor %}
					<div class="load-more text-center dlpro-pagination">
						{{ knp_pagination_render(pagination) }}
					</div>	
				</div>
			</div>
		</div>
	</div>
{% endblock %}
{% block javascripts %}
<script type="text/javascript">
var locations = {{allDoctors|json_encode|raw}};
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCyhtp6PsLljhQvKJLW1rB_Iof1IWCAFKg&libraries=places"></script>
<script type="text/javascript" src="/assets/js/map.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.6/handlebars.min.js"></script>
<script type="text/javascript" src="/assets/plugins/typeahead.js/dist/typeahead.bundle.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
<script type="text/javascript" src="/assets/js/search.js"></script>
<script type="text/javascript">
Handlebars.registerHelper('eq', function () {
    const args = Array.prototype.slice.call(arguments, 0, -1);
    return args.every(function (expression) {
        return args[0] === expression;
    });
});
var isExistCollapse = false;
function dlproPrev(el, timestamp, doctorID){
	var current_element = $(el);
	$.get('{{path('app_next_prev-ajax')}}',{type:'prev',doctor_id:doctorID,prev:timestamp}, function(response){
		if(response){
			current_element.closest('div.schedule-widget').html(response);
			dlproDoCollapsse();
		}
		return false;
	}); 
	return false;
}
function dlproNext(el, timestamp, doctorID){
	var current_element = $(el);
	$.get('{{path('app_next_prev-ajax')}}',{type:'next',doctor_id:doctorID,next:timestamp}, function(response){
		if(response){
			current_element.closest('div.schedule-widget').html(response);
			dlproDoCollapsse();
		}
		return false;
	}); 
	return false;
}
function dlproCollapsse(){
	$.each($('.dlpro-calendar-time-render'), function(){
		var el = $(this);
		if(el.has( "li" ).length){
			$.each(el.find('li'), function(){
				if($(this).find('a').length>4){
					//console.log('n=' + $(this).find('a.selected').length);
					var count = 1;
					$.each($(this).find('a'), function(){
						if(count>4){
							$(this).hide();
						}
						count++;
					});
				}
			});
		}
	});
}
function dlproDoCollapsse(){
	$.each($('.dlpro-calendar-time-render'), function(){
		var el = $(this);
		if(el.has( "li" ).length){
			$.each(el.find('li'), function(){
				//console.log($(this).find('a.selected').length);
				if($(this).find('a.selected').length>4){
					//console.log('n=' + $(this).find('a.selected').length);
					el.find('div.is-dlpro-show-more').show();
					isExistCollapse = true;
					return false;
				}
				else{
					el.find('div.is-dlpro-show-more').css('display', 'none');
				}
			});
		}
		else{
			el.find('div.is-dlpro-show-more').css('display', 'none');
		}
	});
	if(isExistCollapse){
		dlproCollapsse();
	}
}
$(document).ready(function(){
	$('a.page-link').on('click', function(){
		$('#filterForm').attr('action', $(this).attr('href'));
		$('#filterForm').submit();
		return false;
	});
	$(document).on('click','.dlproColapseLink',function(){
		var id =  $(this).attr('href'), btn = $(this);
		$.each($(id).find('li').find('a'), function(){
			if($(this).css('display') == 'none'){
				$(this).show();
			}
			else{
				//$(this).hide();
			}
		});
		btn.hide();
	});
	dlproDoCollapsse();
	
});
$(document).ready(function(){
	$('#dlproSort').change(function(){
		$('#filterForm').attr('action', $(this).children("option:selected").data('href'));
		$('#filterForm').submit();
	});
});
$(document).ready(function(){
	$(document).on('click', '.dlproTimeElementSelected', function(){
		{% if isDoctor == false %}
		var doctorid = $(this).data('doctorid');
		var timeid = $(this).data('id');
		var time= $(this).data('time');
		$('<form action="{{path('app_checkout_redirect')}}" method="post"><input type="hidden" name="doctorid" value="' + doctorid + '"><input type="hidden" name="timeid" value="' + timeid + '"><input type="hidden" name="time" value="' + time + '"></form>').appendTo('body').submit();
		{% endif %}
		return false;
	});
	if ($('#spoken_languages_other').is(':checked')) {
		var selectedValues = new Array();
		{% set cnt = 0 %}
		{%for lg in lang_oth %}
		selectedValues[{{ cnt }}] = '{{ lg|replace({"'": ""})}}';
		{% set cnt = cnt + 1 %}
		{% endfor %}
		$('#lang_other').css('display', 'block');
		$("#lang_other").select2({
			tags: true
		});
		if(selectedValues){
			$("#lang_other").val(selectedValues);
			$('#lang_other').trigger('change');
		}
	}
	else{
		$('#lang_other').css('display', 'none');
	}
	$('#spoken_languages_other').change(function() {
        if(this.checked) {
			var val = $(this).val();
			//alert(val);
			$('#lang_other').css('display', 'block');
			$("#lang_other").select2({
				tags: true
			});
        } 
		else{
			$('#lang_other').select2('destroy'); 
			$('#lang_other').css('display', 'none');
		}
		$('#filterForm').attr('action', '{{ path('app_index') }}');
    });
	$('input[name="spec[]"]').change(function() {
		$('#filterForm').attr('action', '{{ path('app_index') }}');
	});
	$('input[name="lang[]"]').change(function() {
		$('#filterForm').attr('action', '{{ path('app_index') }}');
	});
	$('input[name="gen[]"]').change(function() {
		$('#filterForm').attr('action', '{{ path('app_index') }}');
	});
});
</script>
<script id="result-template" type="text/x-handlebars-template">
	<div class="ProfileCard u-cf" onClick="window.location.replace('https://www.docbooking.ch/doctor/{{'{{slug}}'}}.html');">
		<img class="ProfileCard-avatar" src="{{ '{{' }}picture_profile{{ '}}' }}">
		<div class="ProfileCard-details">
			<div class="ProfileCard-realName">{{ '{{' }}first_name{{ '}}' }}&nbsp;{{ '{{' }}last_name{{ '}}' }}</div>
			<div class="ProfileCard-languages">{{ '{{' }}spoken_languages{{ '}}' }}</div>
			<div class="ProfileCard-description">
				{{ '{{#if (eq speciality "General Practitioner")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-06.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5> 
				{{ '{{else if (eq speciality "Urologist")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-01.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Neurologist")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-10.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Dentist")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-05.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Dental Hygienist")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-05.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Orthopedist")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-03.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Cardiologist")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-04.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Psychologist")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-02.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Nutritionist-Dietician")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-08.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Alternative/Natural Medicine")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-12.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Pediatrician")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-13.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Dermatologist / Aesthetics")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-11.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Gynecologist")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-14.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Physiotherapist")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-07.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else if (eq speciality "Ophtalmologist")}}' }}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-09.png" class="img-fluid" alt="Speciality">
						{{ '{{speciality}}' }}
					</h5>
				{{ '{{else}}'}}
					<h5 class="doc-department">
						<img src="/assets/img/specialities/specialities-06.png" class="img-fluid" alt="Speciality">
						{{ '{{' }}speciality{{ '}}' }}
					</h5>
				{{ '{{/if}}' }}
			</div>
			<div class="ProfileCard-address">{{ '{{' }}description{{ '}}' }}</div>
        </div>
    </div>
</script>
<script id="empty-template" type="text/x-handlebars-template">
	<div class="EmptyMessage">Your search turned up 0 results. This most likely means the backend is down, yikes!</div>
</script>
<script>
$('.searchbar-place-around-me-icon').on('click', function(e){
	if(!$('.searchbar-place-around-me-button').hasClass('searchbar-place-around-me-button-enabled')){
		$('.searchbar-place-around-me-button').addClass('searchbar-place-around-me-button-enabled');
		$('.pac-target-input').attr('readonly', 'readonly');
	}
});
$('.searchbar-delete').on('click', function(e){
	if($('.searchbar-place-around-me-button').hasClass('searchbar-place-around-me-button-enabled')){
		$('.searchbar-place-around-me-button').removeClass('searchbar-place-around-me-button-enabled');
	}
});
$(document).ready(function(){
	$('#search-doctor-field-categ').selectpicker();
});
</script>
{% endblock %}